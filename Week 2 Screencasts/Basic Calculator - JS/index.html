<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Basic Calculator</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"
    ></script>
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/mathjs@12.3.1/lib/browser/math.min.js"
    ></script>

    <script type="text/javascript">
      function addLog(msg) {
        var ul = document.getElementById("log");
        var li = document.createElement("li");
        var msg_text_node = document.createTextNode(msg);
        li.appendChild(msg_text_node);
        ul.appendChild(li);
      }

      function calculate() {
        expression = document.getElementById("expression").value;
        if (expression) {
          console.log(expression);
          try {
            result = eval(expression);
            document.getElementById("expression").value = result;
            addLog(expression + " = " + result);
          } catch (e) {
            console.log("Bad Expression");
            addLog("Input: " + expression + " is bad. Please fix it.");
          }
        } else {
          alert("Please enter an expression in the input.");
        }
      }

      function math_calculate() {
        expression = document.getElementById("expression").value;
        if (expression) {
          console.log(expression);
          try {
            result = math.evaluate(expression);
            document.getElementById("expression").value = result;
            addLog(expression + " = " + result);
          } catch (e) {
            console.log("Bad Expression");
            addLog("Input: " + expression + " is bad. Please fix it.");
          }
        } else {
          alert("Please enter an expression in the input.");
        }
      }

      function initilize_app() {
        calculate_btn = document.getElementById("calculate");
        calculate_btn.addEventListener("click", math_calculate);
      }
    </script>
  </head>

  <!-- gets called when the body is loaded completely -->
  <body onload="initilize_app()">
    <div class="container">
      <div class="row">
        <div class="col"></div>
        <div class="col">
          <input
            type="input"
            class="form-control"
            id="expression"
            placeholder="Enter an expression"
          />
          <button id="calculate" class="btn btn-primary">Calculate</button>
          <br /><br />
          <h3>Calculator Log</h3>
          <ul id="log"></ul>
        </div>
        <div class="col"></div>
      </div>
    </div>
  </body>
</html>
